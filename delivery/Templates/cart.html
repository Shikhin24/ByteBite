{% extends "base.html" %}
{% block title %}My Cart{% endblock %}
{% block content %}
{% csrf_token %}

<h2>My Cart</h2>

{% if cart and cart.cart_items.all %}
<table class="data-table">
  <tr>
    <th>Item</th>
    <th>Quantity</th>
    <th>Price</th>
    <th>Action</th>
  </tr>

  {% for ci in cart.cart_items.all %}
<tr data-item-id="{{ ci.item.id }}">
  <td>{{ ci.item.name }}</td>

  <td>
    <button class="qty-btn" data-action="dec">−</button>
    <span class="qty">{{ ci.quantity }}</span>
    <button class="qty-btn" data-action="inc">+</button>
  </td>

  <td class="price">₹{{ ci.item.price }}</td>

  <td>
    <button class="remove-btn" data-id="{{ ci.item.id }}">Remove</button>
  </td>
</tr>
  {% endfor %}
<form action="{% url 'checkout' username %}" method="get">
  <input type="submit" value="CHECK OUT"/>
</form>

</table>

<p>
  <strong>Total Items:</strong> <span id="total-qty">{{ total_quantity }}</span><br>
  <strong>Total Price:</strong> ₹<span id="total-price">{{ cart.total_price }}</span>
</p>


{% else %}
<p>Your cart is empty.</p>
{% endif %}


<a href="{% url 'customer_home' %}">Back to Restaurants</a>

{% endblock %}
